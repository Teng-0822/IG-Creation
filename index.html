<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #a8edea, #fed6e3);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 10px;
    }
    .container {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      padding: 20px;
      width: 100%;
      max-width: 400px;
    }
    h2 { text-align: center; margin-bottom: 20px; }

    .field { margin: 8px 0; display: flex; align-items: center; }
    .field label { font-weight: bold; margin-right: 6px; white-space: nowrap; }
    .field span, .field input { flex: 1; font-size: 15px; }
    .field input {
      padding: 4px; border-radius: 6px; border: 1px solid #ccc; display: none;
    }
    .edit-btn { background: #ffc107; color: #000; font-size: 12px; padding: 4px 6px; margin-left: 5px; border-radius: 6px; cursor: pointer; }
    .copy-btn { background: #28a745; color: #fff; font-size: 12px; padding: 4px 6px; margin-left: 5px; border-radius: 6px; cursor: pointer; }

    .actions { margin-top: 15px; text-align: center; }
    button {
      margin: 5px; padding: 10px 14px; border: none; border-radius: 10px;
      cursor: pointer; font-size: 14px; transition: 0.3s;
    }
    .nav-btn { background: #007bff; color: #fff; }
    .save-btn { background: #17a2b8; color: #fff; }
    .ig-btn { background: #e1306c; color: #fff; }

    .floating-refresh, .floating-random {
      position: fixed; bottom: 20px; width: 50px; height: 50px;
      display: flex; justify-content: center; align-items: center;
      border-radius: 50%; font-size: 24px; cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3); color: white;
    }
    .floating-refresh { right: 20px; background: #ff4081; }
    .floating-random { right: 80px; background: #3f51b5; }

    /* Toast */
    .toast {
      position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%);
      background: rgba(0,0,0,0.8); color: white; padding: 10px 16px;
      border-radius: 8px; font-size: 14px; opacity: 0; transition: opacity 0.3s ease;
    }
    .toast.show { opacity: 1; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Profile</h2>

    <div class="field"><label>Name:</label><span id="name"></span>
      <button class="copy-btn" onclick="copyText('name'); openCurrentIG()">üìã</button>
    </div>

    <div class="field"><label>Old Username:</label><span id="oldusername"></span>
      <input id="oldusernameInput">
      <button class="edit-btn" onclick="toggleEdit('oldusername')">‚úèÔ∏è</button>
      <button class="copy-btn" onclick="copyText('oldusername'); openCurrentIG()">üìã</button>
    </div>

    <div class="field"><label>New Username:</label><span id="newusername"></span>
      <input id="newusernameInput">
      <button class="edit-btn" onclick="toggleEdit('newusername')">‚úèÔ∏è</button>
      <button class="copy-btn" onclick="copyText('newusername'); openCurrentIG()">üìã</button>
    </div>

    <div class="field"><label>Password:</label><span id="password"></span>
      <button class="copy-btn" onclick="copyText('password'); openCurrentIG()">üìã</button>
    </div>

    <div class="field"><label>Birthdate:</label><span id="birthdate"></span>
      <button class="copy-btn" onclick="copyText('birthdate')">üìã</button>
    </div>

    <div class="field"><label>ID:</label><span id="id"></span></div>

    <div class="actions">
      <button class="save-btn" onclick="saveEdits()">üíæ Save</button>
      <button class="ig-btn" onclick="openCurrentIG(); openCurrentIG()">üì± IG</button><br>
      <button class="nav-btn" onclick="prevProfile()">‚èÆ Prev</button>
      <button class="nav-btn" onclick="nextProfile(); runNextContainer()">Next ‚è≠</button><br>
    </div>
  </div>

  <div class="floating-refresh" onclick="loadProfiles()">‚ü≥</div>
  <div class="floating-random" onclick="randomCelebrity(); openCurrentIG()">üé≤</div>

  <div id="toast" class="toast"></div>

  <script>
    const apiUrl = "https://script.google.com/macros/s/AKfycbzjygQeEi6TqGQqssc9HgHBxBDG4ROEMnsRCef7y6NA0rZq3N7IMvn10oZdzHtZKfotlA/exec";
    let profiles = [], currentIndex = 0;

    async function loadProfiles() {
      const res = await fetch(apiUrl);
      profiles = await res.json();
      currentIndex = localStorage.getItem("currentIndex") ? parseInt(localStorage.getItem("currentIndex")) : 0;
      displayProfile();
    }

    function displayProfile() {
      const p = profiles[currentIndex];
      ["name","oldusername","newusername","password","birthdate","id"].forEach(f=>{
        document.getElementById(f).textContent = p[f] || "";
        if(document.getElementById(f+"Input")) document.getElementById(f+"Input").style.display="none";
      });
      localStorage.setItem("currentIndex", currentIndex);
    }

    function prevProfile(){ if(currentIndex>0){ currentIndex--; displayProfile(); } }
    function nextProfile(){ if(currentIndex<profiles.length-1){ currentIndex++; displayProfile(); } }
    function runNextContainer(){ window.location.href="shortcuts://run-shortcut?name=NextIG"; }

    function toggleEdit(field){
      const span=document.getElementById(field), input=document.getElementById(field+"Input");
      if(input.style.display==="none"){ input.value=span.textContent; span.style.display="none"; input.style.display="inline-block"; }
      else { span.textContent=input.value; span.style.display="inline-block"; input.style.display="none"; }
    }

    async function saveEdits(){
      const p=profiles[currentIndex];
      const oldusername=document.getElementById("oldusernameInput").style.display!=="none"?document.getElementById("oldusernameInput").value:p.oldusername;
      const newusername=document.getElementById("newusernameInput").style.display!=="none"?document.getElementById("newusernameInput").value:p.newusername;
      const updated={ id:p.id, oldusername, newusername };
      const res=await fetch(apiUrl,{ method:"POST", body:JSON.stringify(updated), headers:{"Content-Type":"application/json"} });
      const result=await res.json();
      if(result.success){ showToast("Saved!"); loadProfiles(); }
      else { showToast("Error: "+result.message); }
    }

    function openCurrentIG(){ window.open(`https://instagram.com/${p.newusername}`, "_blank"); }

    function copyText(field){
      const text=document.getElementById(field).textContent;
      navigator.clipboard.writeText(text);
      showToast(field+" copied!");
    }

    function showToast(msg){
      const t=document.getElementById("toast");
      t.textContent=msg; t.classList.add("show");
      setTimeout(()=>{ t.classList.remove("show"); },1000);
    }

    const celebrities=[
      "Selena Gomez","Kylie Jenner","Dwayne Johnson","Ariana Grande","Kim Kardashian","Beyonc√©","Khlo√© Kardashian","Kendall Jenner","Taylor Swift","Jennifer Lopez","Nicki Minaj","Miley Cyrus","Katy Perry","Zendaya","Kevin Hart","Cardi B","LeBron James","Demi Lovato","Leonardo DiCaprio","Vin Diesel","Zac Efron","Will Smith","Tom Cruise","Angelina Jolie","Brad Pitt","Scarlett Johansson","Chris Evans","Chris Hemsworth","Robert Downey Jr.","Mark Ruffalo","Jeremy Renner","Tom Holland","Zendaya","Timoth√©e Chalamet","Florence Pugh","Natalie Portman","Anne Hathaway","Emma Stone","Emma Watson","Margot Robbie","Gal Gadot","Halle Berry","Sandra Bullock","Julia Roberts","Reese Witherspoon","Jennifer Aniston","Courteney Cox","Matthew Perry","Lisa Kudrow","Matt LeBlanc","David Schwimmer","Steve Carell","John Krasinski","Mindy Kaling","BJ Novak","Rainn Wilson","Ed Helms","Jenna Fischer","Ellie Kemper","Jonah Hill","Channing Tatum","Matthew McConaughey","Jake Gyllenhaal","Ryan Reynolds","Ryan Gosling","Blake Lively","Jessica Alba","Eva Mendes","Megan Fox","Shia LaBeouf","Kristen Stewart","Robert Pattinson","Taylor Lautner","Dakota Johnson","Jamie Dornan","Jennifer Lawrence","Josh Hutcherson","Liam Hemsworth","Woody Harrelson","Donald Glover","Childish Gambino","Chance the Rapper","Travis Scott","Post Malone","Billie Eilish","Olivia Rodrigo","Doja Cat","Saweetie","Lil Nas X","Snoop Dogg","Dr. Dre","Ice Cube","Eminem","50 Cent","Jay-Z","Kanye West","Travis Barker","Machine Gun Kelly","Lana Del Rey","Halsey"
    ];

    function randomCelebrity(){
      const rand=celebrities[Math.floor(Math.random()*celebrities.length)];
      navigator.clipboard.writeText(rand);
      showToast("Copied: "+rand);
    }

    loadProfiles();
  </script>
</body>
</html>
